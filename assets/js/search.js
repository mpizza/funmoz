window.baidu={sug:function(sug){SEARCH.sugbox.empty();if(sug.s.length>0){for(var i=0;i<sug.s.length;i++){SEARCH.sugbox.append("<li>"+sug.s[i]+"</li>");}
SEARCH.sugbox.show();}else{SEARCH.sugbox.hide();}}};var SEARCH={tab:$("#searchTab"),radio:$("#search-radio"),form:$("#search-form"),key:$("#search-key"),logobox:$("#search-logo"),link:$("#search-logo a"),current:$("#search-current"),btn:$("#search-btn"),sugbox:$("#sugbox"),i:0,j:0,focus:null,listen:null,lastword:"",
engines:[
{name:"web",label:"網頁",lists:[{name:'google_web',label:'Google',url:'https://www.google.com/',classname:'google-logo',href:'https://www.google.com/',charset:'utf-8'},{name:'yahoo_web',label:'Yahoo!奇摩',url:'http://tw.yahoo.com/',classname:'yahoo-logo',href:'http://tw.yahoo.com/'}]},
{name:"pic",label:"圖片",lists:[{name:'google_pic',label:'google',url:'http://i.firefoxchina.cn/search',classname:'google-logo',href:'http://pindao.huoban.taobao.com/tms/channel/channelcode.htm?pid=mm_28347190_2425761_9494155',charset:'utf-8'}]},
{name:"map",label:"影片",lists:[{name:'google_music',label:'谷歌',url:'http://i.firefoxchina.cn/search',classname:'google-logo',href:'http://www.google.cn/music/homepage?hl=zh-CN&tab=wU&client=aff-priustest&channel=hotlink',charset:'utf-8'}]},
{name:"news",label:"新聞",lists:[{name:'google_news',label:'google',url:'http://i.firefoxchina.cn/search',classname:'google-logo',href:'http://image.baidu.com/',charset:'utf-8'}]},
{name:"map",label:"地圖",lists:[{name:'google_map',label:'Google',url:'http://i.firefoxchina.cn/search',classname:'google-logo',href:'http://ditu.google.cn/maps?hl=zh-CN&tab=il&client=aff-priustest&channel=hotlink',charset:'utf-8'},]},
{name:"blog",label:"網誌",lists:[{name:'google_news',label:'谷歌',url:'http://i.firefoxchina.cn/search',classname:'google-logo',href:'http://news.google.com.hk/nwshp?hl=zh-CN&tab=in&client=aff-priustest&channel=hotlink',charset:'utf-8'}]},
{name:"books",label:"學術搜尋",lists:[{name:'google_books',label:'Google',url:'http://i.firefoxchina.cn/search',classname:'google-logo',href:'http://www.google.com.hk/videohp?hl=zh-CN&ned=cn&tab=nv&client=aff-priustest&channel=hotlink',charset:'utf-8'}]},
],
init:function(){for(var i=0;i<SEARCH.engines.length;i++){if(i==0)
SEARCH.tab.append("<li class='current'>"+SEARCH.engines[i].label+"</li>");else
SEARCH.tab.append("<li>"+SEARCH.engines[i].label+"</li>");}
SEARCH.tab.children().click(function(){$(this).addClass("current").siblings().removeClass("current");SEARCH.writeSearch($(this).index(),0);SEARCH.writeRadio($(this).index());});SEARCH.writeSearch(0,0);SEARCH.writeRadio(0);},writeRadio:function(i){SEARCH.radio.empty();if(SEARCH.engines[i].lists.length>1){for(var j=0;j<SEARCH.engines[i].lists.length;j++){if(j==0)var checked=" checked='checked' ";else var checked="";SEARCH.radio.append("<li><input type='radio' name='"+SEARCH.engines[i].name+"' id='"+SEARCH.engines[i].lists[j].name+"' "+checked+"><label for='"+SEARCH.engines[i].lists[j].name+"'>"+SEARCH.engines[i].lists[j].label+"</label></li>");}
SEARCH.radio.children().find("input:radio").click(function(){SEARCH.writeSearch(SEARCH.i,$(this).parent().index());});}},writeSearch:function(i,j){SEARCH.form.attr("action",SEARCH.engines[i].lists[j].url);SEARCH.form.attr("accept-charset",SEARCH.engines[i].lists[j].charset);SEARCH.form.attr("track-title",SEARCH.engines[i].lists[j].label);SEARCH.form.attr("track-url",SEARCH.engines[i].lists[j].url);SEARCH.form.attr("track-key","search_"+SEARCH.engines[i].lists[j].name);SEARCH.current.val(SEARCH.engines[i].lists[j].name);SEARCH.logobox.attr({"class":SEARCH.engines[i].lists[j].classname,"track-key":"search_"+SEARCH.engines[i].lists[j].name});SEARCH.link.attr({"href":SEARCH.engines[i].lists[j].href,title:SEARCH.engines[i].lists[j].label});SEARCH.i=i;SEARCH.j=j;},suggest:function(){var offset=SEARCH.focus.offset();SEARCH.sugbox.css({"left":offset.left,"top":offset.top+SEARCH.focus.height()});var curr=SEARCH.focus.val();if(curr!==""&&curr!==SEARCH.lastword){SEARCH.lastword=curr;var engine=SEARCH.engines[SEARCH.i].name;switch(engine){case'网页':$("body").append("<script charset='gb2312' type='text/javascript' src='http://suggestion.baidu.com/su?wd="+encodeURIComponent(curr)+"'></script>");break;case'购物':$("body").append("<script charset='gb2312' type='text/javascript' src='http://suggestion.baidu.com/su?wd="+encodeURIComponent(curr)+"'></script>");break;case'MP3':$("body").append("<script charset='gb2312' type='text/javascript' src='http://nssug.baidu.com/su?wd="+encodeURIComponent(curr)+"&prod=mp3'></script>");break;case'图片':$("body").append("<script charset='gb2312' type='text/javascript' src='http://nssug.baidu.com/su?wd="+encodeURIComponent(curr)+"&prod=image'></script>");break;case'新闻':$("body").append("<script charset='gb2312' type='text/javascript' src='http://nssug.baidu.com/su?wd="+encodeURIComponent(curr)+"&prod=news'></script>");break;case'视频':$("body").append("<script charset='gb2312' type='text/javascript' src='http://nssug.baidu.com/su?wd="+encodeURIComponent(curr)+"&prod=video'></script>");break;case'知道':$("body").append("<script charset='gb2312' type='text/javascript' src='http://nssug.baidu.com/su?wd="+encodeURIComponent(curr)+"&prod=zhidao'></script>");break;default:$("body").append("<script charset='gb2312' type='text/javascript' src='http://suggestion.baidu.com/su?wd="+encodeURIComponent(curr)+"'></script>");}}}}
SEARCH.init();$(".keyInput").focus(function(){SEARCH.focus=$(this);SEARCH.listen=setInterval(SEARCH.suggest,300);}).blur(function(){clearInterval(SEARCH.listen);});$(".keyInput").keydown(function(event){var len=$("#sugbox li").length;var idx=0;if($("#sugbox li.selected")){idx=$("#sugbox li.selected").eq(0).index();}
if(event.keyCode==38){if(idx>0){$("#sugbox li").eq(idx-1).addClass("selected").siblings().removeClass("selected");}else{$("#sugbox li:last").addClass("selected").siblings().removeClass("selected");}
idx=idx-1;$(this).val($("#sugbox li.selected").html());SEARCH.lastword=$(this).val();}else if(event.keyCode==40){if(idx<len-1){$("#sugbox li").eq(idx+1).addClass("selected").siblings().removeClass("selected");}else{$("#sugbox li").eq(0).addClass("selected").siblings().removeClass("selected");}
idx=idx+1;$(this).val($("#sugbox li.selected").html());SEARCH.lastword=$(this).val();}else if(event.keyCode==13){clearInterval(SEARCH.listen);SEARCH.sugbox.hide();}});$("#sugbox li").live("mouseover",function(){$(this).addClass("selected").siblings().removeClass("selected");SEARCH.focus.val($(this).html());SEARCH.lastword=$(this).html();});$("#sugbox li").live("click",function(){SEARCH.focus.parent("form").submit();});$(document).click(function(event){$("#sugbox").hide();});